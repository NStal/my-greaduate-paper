// Generated by CoffeeScript 1.4.0
(function() {

  Static.InterpolationStep = function(object, target, attributes, limit, useNorm, destination) {
    var attr, diffArray, index, item, norm, total, _i, _j, _k, _l, _len, _len1, _len2, _len3, _len4, _m;
    if (useNorm == null) {
      useNorm = false;
    }
    if (destination == null) {
      destination = {};
    }
    diffArray = [];
    for (_i = 0, _len = attributes.length; _i < _len; _i++) {
      item = attributes[_i];
      console.assert(typeof target[item] === "number");
      console.assert(typeof object[item] === "number");
      diffArray.push(target[item] - object[item]);
    }
    if (useNorm) {
      total = 0;
      for (_j = 0, _len1 = diffArray.length; _j < _len1; _j++) {
        item = diffArray[_j];
        total += item * item;
      }
      norm = Math.sqrt(total);
      if (norm === 0) {
        norm = 0.00001;
      }
      for (index = _k = 0, _len2 = diffArray.length; _k < _len2; index = ++_k) {
        item = diffArray[index];
        diffArray[index] = item / norm * limit;
      }
    } else {
      for (index = _l = 0, _len3 = diffArray.length; _l < _len3; index = ++_l) {
        item = diffArray[index];
        if (Math.abs(item) > limit) {
          diffArray[index] = Math.abs(item) / item * limit;
        }
      }
    }
    for (index = _m = 0, _len4 = attributes.length; _m < _len4; index = ++_m) {
      attr = attributes[index];
      destination[attr] = diffArray[index];
    }
    return destination;
  };

  Static.Interpolation = function(object, target, attributes, limit, useNorm, destination) {
    var index, item, _i, _len;
    if (useNorm == null) {
      useNorm = false;
    }
    if (destination == null) {
      destination = {};
    }
    destination = Static.InterpolationStep(object, target, attributes, limit, useNorm, destination);
    for (index = _i = 0, _len = attributes.length; _i < _len; index = ++_i) {
      item = attributes[index];
      destination[item] += object[item];
      if ((destination[item] - target[item]) * (object[item] - target[item]) < 0) {
        destination[item] = target[item];
      }
    }
    return destination;
  };

}).call(this);
